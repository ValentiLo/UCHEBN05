# **–ü–ú05. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞**

## **1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **1.1. –ú–∞—Ç—Ä–∏—Ü–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**

```yaml
# test_configurations/matrix.yml
test_matrix:
  backend:
    python_versions: ["3.8", "3.9", "3.10", "3.11"]
    django_versions: ["4.2", "5.0"]
    databases: 
      - postgresql_13
      - postgresql_14
      - postgresql_15
    cache_backends: ["redis_6", "redis_7", "memcached"]
    
  frontend:
    browsers: 
      desktop:
        - "chrome_120"
        - "chrome_121"
        - "firefox_115"
        - "firefox_116"
        - "safari_16"
        - "safari_17"
      mobile:
        - "chrome_mobile_120"
        - "safari_ios_16"
        - "safari_ios_17"
    
  infrastructure:
    web_servers: ["nginx_1.18", "nginx_1.20", "apache_2.4"]
    operating_systems: ["ubuntu_20.04", "ubuntu_22.04", "centos_7", "centos_8"]
    container_platforms: ["docker_20", "docker_24", "kubernetes_1.27", "kubernetes_1.28"]
```

---

## **2. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **2.1. Docker Compose –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π**

```yaml
# docker-compose.config-test.yml
version: '3.8'

services:
  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
  postgres-13:
    image: postgres:13
    environment:
      POSTGRES_DB: ecommerce_test
      POSTGRES_USER: test_user
      POSTGRES_PASSWORD: test_password
    ports:
      - "5433:5432"
    networks:
      - test-network

  postgres-14:
    image: postgres:14
    environment:
      POSTGRES_DB: ecommerce_test
      POSTGRES_USER: test_user
      POSTGRES_PASSWORD: test_password
    ports:
      - "5434:5432"
    networks:
      - test-network

  postgres-15:
    image: postgres:15
    environment:
      POSTGRES_DB: ecommerce_test
      POSTGRES_USER: test_user
      POSTGRES_PASSWORD: test_password
    ports:
      - "5435:5432"
    networks:
      - test-network

  # Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
  redis-6:
    image: redis:6-alpine
    ports:
      - "6380:6379"
    networks:
      - test-network

  redis-7:
    image: redis:7-alpine
    ports:
      - "6381:6379"
    networks:
      - test-network

  # Memcached
  memcached:
    image: memcached:1.6-alpine
    ports:
      - "11212:11211"
    networks:
      - test-network

  # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Python
  app-python-38:
    build:
      context: .
      dockerfile: Dockerfile.python38
    environment:
      DATABASE_URL: postgres://test_user:test_password@postgres-14:5432/ecommerce_test
      REDIS_URL: redis://redis-7:6379/0
      DEBUG: "True"
    ports:
      - "8001:8000"
    depends_on:
      - postgres-14
      - redis-7
    networks:
      - test-network

  app-python-311:
    build:
      context: .
      dockerfile: Dockerfile.python311
    environment:
      DATABASE_URL: postgres://test_user:test_password@postgres-15:5432/ecommerce_test
      REDIS_URL: redis://redis-7:6379/0
      DEBUG: "True"
    ports:
      - "8004:8000"
    depends_on:
      - postgres-15
      - redis-7
    networks:
      - test-network

networks:
  test-network:
    driver: bridge
```

### **2.2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥**

```python
# config/settings/test_postgresql_13.py
from .base import *

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'ecommerce_test',
        'USER': 'test_user',
        'PASSWORD': 'test_password',
        'HOST': 'localhost',
        'PORT': '5433',
        'TEST': {
            'NAME': 'test_ecommerce_pg13',
        }
    }
}

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://localhost:6381/1',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
        }
    }
}

# –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è PostgreSQL 13
DATABASE_OPTIONS = {
    'isolation_level': 'read committed',
    'timezone': 'UTC'
}
```

```python
# config/settings/test_redis_6.py
from .base import *

CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://localhost:6380/1',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            'SOCKET_CONNECT_TIMEOUT': 5,
            'SOCKET_TIMEOUT': 5,
            'RETRY_ON_TIMEOUT': True,
        }
    },
    'session': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://localhost:6380/2',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
        }
    }
}

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–π
SESSION_ENGINE = 'django.contrib.sessions.backends.cache'
SESSION_CACHE_ALIAS = 'session'
```

---

## **3. –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**

### **3.1. –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

```python
# tests/config_test_base.py
import os
import pytest
from django.test import TestCase, override_settings
from django.conf import settings
from django.db import connection

class ConfigurationTestBase(TestCase):
    """–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    
    @classmethod
    def setUpClass(cls):
        super().setUpClass()
        cls.current_config = cls._get_current_configuration()
    
    @classmethod
    def _get_current_configuration(cls):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã"""
        return {
            'python_version': f"{sys.version_info.major}.{sys.version_info.minor}",
            'django_version': django.get_version(),
            'database_engine': settings.DATABASES['default']['ENGINE'],
            'database_version': cls._get_database_version(),
            'cache_backend': list(settings.CACHES.keys())[0],
            'debug_mode': settings.DEBUG,
        }
    
    @classmethod
    def _get_database_version(cls):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
        try:
            with connection.cursor() as cursor:
                if 'postgresql' in settings.DATABASES['default']['ENGINE']:
                    cursor.execute("SELECT version()")
                    version = cursor.fetchone()[0]
                    return version.split(' ')[1]
                elif 'sqlite' in settings.DATABASES['default']['ENGINE']:
                    cursor.execute("SELECT sqlite_version()")
                    return cursor.fetchone()[0]
        except Exception as e:
            return f"Unknown: {str(e)}"
    
    def assertConfigurationCompatible(self, feature, min_version=None, max_version=None):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å —Ñ–∏—á–µ–π"""
        config = self.current_config
        
        if min_version and config['python_version'] < min_version:
            pytest.skip(f"{feature} requires Python >= {min_version}")
        
        if max_version and config['python_version'] > max_version:
            pytest.skip(f"{feature} not tested with Python > {max_version}")
        
        return True
```

### **3.2. –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Python**

```python
# tests/config/test_python_versions.py
import sys
import pytest
from tests.config_test_base import ConfigurationTestBase

class TestPythonCompatibility(ConfigurationTestBase):
    """–¢–µ—Å—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Python"""
    
    def test_python_version_specific_features(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏—á, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è –≤–µ—Ä—Å–∏–π Python"""
        python_version = sys.version_info
        
        # –¢–µ—Å—Ç—ã –¥–ª—è Python 3.8+
        if python_version >= (3, 8):
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è walrus operator
            result = [name for product in self.products if (name := product.get('name'))]
            self.assertIsInstance(result, list)
        
        # –¢–µ—Å—Ç—ã –¥–ª—è Python 3.9+
        if python_version >= (3, 9):
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π —Ç–∏–ø–æ–≤
            from typing import Annotated
            test_var: Annotated[str, "Test annotation"] = "test"
            self.assertEqual(test_var, "test")
        
        # –¢–µ—Å—Ç—ã –¥–ª—è Python 3.10+
        if python_version >= (3, 10):
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ pattern matching
            value = "success"
            match value:
                case "success":
                    result = True
                case _:
                    result = False
            self.assertTrue(result)
    
    def test_async_compatibility(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏"""
        import asyncio
        
        async def async_operation():
            await asyncio.sleep(0.1)
            return "completed"
        
        # –ó–∞–ø—É—Å–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
        result = asyncio.run(async_operation())
        self.assertEqual(result, "completed")
    
    @pytest.mark.skipif(sys.version_info < (3, 9), 
                       reason="Requires Python 3.9+ for zoneinfo")
    def test_timezone_handling(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω (Python 3.9+)"""
        from zoneinfo import ZoneInfo
        from datetime import datetime
        
        moscow_tz = ZoneInfo("Europe/Moscow")
        dt = datetime(2024, 1, 1, 12, 0, tzinfo=moscow_tz)
        
        self.assertEqual(str(dt.tzinfo), "Europe/Moscow")
```

### **3.3. –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö**

```python
# tests/config/test_database_configs.py
import pytest
from django.db import connection, transaction
from tests.config_test_base import ConfigurationTestBase

class TestDatabaseCompatibility(ConfigurationTestBase):
    """–¢–µ—Å—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö"""
    
    def test_database_specific_queries(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö SQL –∑–∞–ø—Ä–æ—Å–æ–≤"""
        db_engine = settings.DATABASES['default']['ENGINE']
        
        with connection.cursor() as cursor:
            # –¢–µ—Å—Ç JSON –ø–æ–ª–µ–π (PostgreSQL)
            if 'postgresql' in db_engine:
                cursor.execute("""
                    SELECT jsonb_typeof('{"test": "value"}'::jsonb) as json_type
                """)
                result = cursor.fetchone()
                self.assertEqual(result[0], 'object')
            
            # –¢–µ—Å—Ç –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
            if 'postgresql' in db_engine:
                cursor.execute("""
                    SELECT to_tsvector('english', 'test search query') @@ to_tsquery('english', 'test')
                """)
                result = cursor.fetchone()
                self.assertTrue(result[0])
    
    def test_transaction_handling(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π"""
        from modules.products.models import Product
        
        initial_count = Product.objects.count()
        
        try:
            with transaction.atomic():
                Product.objects.create(
                    name="Test Transaction Product",
                    price=100.00,
                    sku="TEST_TRANSACTION"
                )
                # –°–∏–º—É–ª–∏—Ä—É–µ–º –æ—à–∏–±–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ rollback
                if not getattr(self, 'test_commit', False):
                    raise Exception("Test rollback")
        except Exception:
            pass
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—Ç–∏–ª–∞—Å—å
        final_count = Product.objects.count()
        self.assertEqual(initial_count, final_count)
    
    def test_database_constraints(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
        from django.db import IntegrityError
        from modules.products.models import Product
        
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–¥—É–∫—Ç —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º SKU
        Product.objects.create(
            name="Test Product",
            price=100.00,
            sku="UNIQUE_SKU_TEST"
        )
        
        # –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç
        with self.assertRaises(IntegrityError):
            Product.objects.create(
                name="Duplicate Product",
                price=200.00,
                sku="UNIQUE_SKU_TEST"
            )
    
    @pytest.mark.parametrize("batch_size", [100, 1000, 10000])
    def test_bulk_operations(self, batch_size):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π"""
        from modules.products.models import Product
        
        products = [
            Product(
                name=f"Bulk Product {i}",
                price=i * 10.0,
                sku=f"BULK_{i}"
            )
            for i in range(batch_size)
        ]
        
        # –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
        created = Product.objects.bulk_create(products, batch_size=1000)
        self.assertEqual(len(created), batch_size)
        
        # –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        for product in created:
            product.price += 5.0
        
        updated = Product.objects.bulk_update(created, ['price'], batch_size=1000)
        self.assertEqual(updated, batch_size)
```

### **3.4. –¢–µ—Å—Ç—ã –¥–ª—è —Å–∏—Å—Ç–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**

```python
# tests/config/test_cache_configs.py
import time
import pytest
from django.core.cache import cache, caches
from tests.config_test_base import ConfigurationTestBase

class TestCacheCompatibility(ConfigurationTestBase):
    """–¢–µ—Å—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è"""
    
    def setUp(self):
        super().setUp()
        cache.clear()
    
    def test_basic_cache_operations(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è"""
        # Set –∏ Get
        cache.set('test_key', 'test_value', 60)
        value = cache.get('test_key')
        self.assertEqual(value, 'test_value')
        
        # Delete
        cache.delete('test_key')
        value = cache.get('test_key')
        self.assertIsNone(value)
        
        # Increment/Decrement
        cache.set('counter', 10, 60)
        cache.incr('counter')
        self.assertEqual(cache.get('counter'), 11)
        cache.decr('counter')
        self.assertEqual(cache.get('counter'), 10)
    
    def test_cache_timeout_handling(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ –∫—ç—à–∞"""
        cache.set('temp_key', 'temp_value', 1)  # 1 —Å–µ–∫—É–Ω–¥–∞
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å—Ç—å
        self.assertEqual(cache.get('temp_key'), 'temp_value')
        
        # –ñ–¥–µ–º –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        time.sleep(1.1)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —É–¥–∞–ª–∏–ª–æ—Å—å
        self.assertIsNone(cache.get('temp_key'))
    
    def test_cache_backend_specific_features(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ–∏—á –±—ç–∫–µ–Ω–¥–æ–≤ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è"""
        cache_backend = settings.CACHES['default']['BACKEND']
        
        if 'redis' in cache_backend:
            # –¢–µ—Å—Ç–∏—Ä—É–µ–º Redis-specific —Ñ–∏—á–∏
            redis_cache = caches['default']
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
            self.assertTrue(redis_cache.client.get_client().ping())
            
            # –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–∞–º–∏
            redis_cache.client.get_client().sadd('test_set', 'member1', 'member2')
            members = redis_cache.client.get_client().smembers('test_set')
            self.assertEqual(len(members), 2)
        
        elif 'memcached' in cache_backend:
            # –¢–µ—Å—Ç–∏—Ä—É–µ–º Memcached-specific —Ñ–∏—á–∏
            memcached_cache = caches['default']
            
            # Memcached –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä –∫–ª—é—á–∞
            long_key = 'x' * 250  # –°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π –∫–ª—é—á
            with self.assertRaises(Exception):
                memcached_cache.set(long_key, 'value', 60)
    
    def test_session_cache_integration(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫—ç—à–∞ —Å —Å–µ—Å—Å–∏—è–º–∏"""
        from django.contrib.sessions.backends.cache import SessionStore
        
        session = SessionStore()
        session['test_session_key'] = 'test_session_value'
        session.save()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å –≤ –∫—ç—à–µ
        session_key = session.session_key
        self.assertIsNotNone(session_key)
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–µ—Å—Å–∏—é –∑–∞–Ω–æ–≤–æ
        new_session = SessionStore(session_key)
        self.assertEqual(new_session['test_session_key'], 'test_session_value')
```

---

## **4. Selenium —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤**

### **4.1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Selenium Grid**

```python
# tests/selenium/config/browser_configs.py
from selenium import webdriver
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

class BrowserConfig:
    """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤"""
    
    @staticmethod
    def get_chrome_options(version="120"):
        """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Chrome"""
        options = webdriver.ChromeOptions()
        options.add_argument('--headless')
        options.add_argument('--no-sandbox')
        options.add_argument('--disable-dev-shm-usage')
        options.add_argument('--disable-gpu')
        options.add_argument('--window-size=1920,1080')
        
        # –í–µ—Ä—Å–∏—è-specific –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        if version >= "121":
            options.add_argument('--disable-blink-features=AutomationControlled')
        
        return options
    
    @staticmethod
    def get_firefox_options(version="115"):
        """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Firefox"""
        options = webdriver.FirefoxOptions()
        options.add_argument('--headless')
        options.add_argument('--width=1920')
        options.add_argument('--height=1080')
        
        # –í–µ—Ä—Å–∏—è-specific –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        if version >= "116":
            options.set_preference("dom.webnotifications.enabled", False)
        
        return options
    
    @staticmethod
    def get_safari_options(version="16"):
        """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Safari"""
        # Safari –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç headless —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ Selenium
        capabilities = DesiredCapabilities.SAFARI.copy()
        
        if version >= "17":
            capabilities['safari:automaticInspection'] = True
        
        return capabilities
    
    @staticmethod
    def get_mobile_config(device="chrome_mobile"):
        """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤"""
        mobile_emulation = {
            "deviceName": "iPhone 12 Pro"
        }
        
        options = webdriver.ChromeOptions()
        options.add_experimental_option("mobileEmulation", mobile_emulation)
        
        return options
```

### **4.2. –ö—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —Ç–µ—Å—Ç—ã**

```python
# tests/selenium/test_cross_browser.py
import pytest
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from tests.selenium.config.browser_configs import BrowserConfig

@pytest.mark.parametrize("browser_config", [
    {"browser": "chrome", "version": "120"},
    {"browser": "chrome", "version": "121"},
    {"browser": "firefox", "version": "115"},
    {"browser": "firefox", "version": "116"},
    {"browser": "safari", "version": "16"},
])
class TestCrossBrowserCompatibility:
    """–ö—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"""
    
    def setUp(self):
        self.base_url = "http://localhost:8000"
    
    def get_driver(self, browser_config):
        """–°–æ–∑–¥–∞–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞"""
        browser = browser_config["browser"]
        version = browser_config["version"]
        
        if browser == "chrome":
            options = BrowserConfig.get_chrome_options(version)
            driver = webdriver.Chrome(options=options)
        elif browser == "firefox":
            options = BrowserConfig.get_firefox_options(version)
            driver = webdriver.Firefox(options=options)
        elif browser == "safari":
            capabilities = BrowserConfig.get_safari_options(version)
            driver = webdriver.Safari(desired_capabilities=capabilities)
        
        driver.implicitly_wait(10)
        return driver
    
    def test_homepage_loading(self, browser_config):
        """–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã"""
        driver = self.get_driver(browser_config)
        
        try:
            driver.get(f"{self.base_url}/")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            wait = WebDriverWait(driver, 10)
            
            # –õ–æ–≥–æ—Ç–∏–ø
            logo = wait.until(
                EC.presence_of_element_located((By.CSS_SELECTOR, ".navbar-brand"))
            )
            self.assertTrue(logo.is_displayed())
            
            # –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞
            search_input = driver.find_element(By.CSS_SELECTOR, "input[type='search']")
            self.assertTrue(search_input.is_displayed())
            
            # –ö–æ—Ä–∑–∏–Ω–∞
            cart_icon = driver.find_element(By.CSS_SELECTOR, ".cart-icon")
            self.assertTrue(cart_icon.is_displayed())
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            self.assertIn("ShopStore", driver.title)
            
        finally:
            driver.quit()
    
    def test_product_search_functionality(self, browser_config):
        """–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤"""
        driver = self.get_driver(browser_config)
        
        try:
            driver.get(f"{self.base_url}/")
            
            # –í–≤–æ–¥–∏–º –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
            search_input = driver.find_element(By.CSS_SELECTOR, "input[type='search']")
            search_input.send_keys("test product")
            
            # –ù–∞–∂–∏–º–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–∏—Å–∫–∞
            search_button = driver.find_element(By.CSS_SELECTOR, ".search-button")
            search_button.click()
            
            # –ñ–¥–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            wait = WebDriverWait(driver, 10)
            results = wait.until(
                EC.presence_of_element_located((By.CSS_SELECTOR, ".search-results"))
            )
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∑–∏–ª–∏—Å—å
            self.assertTrue(results.is_displayed())
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º CSS —Å–≤–æ–π—Å—Ç–≤–∞ (–±—Ä–∞—É–∑–µ—Ä-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ)
            computed_style = driver.execute_script(
                "return window.getComputedStyle(arguments[0]).display;", results
            )
            self.assertEqual(computed_style, "block")
            
        finally:
            driver.quit()
    
    def test_shopping_cart_functionality(self, browser_config):
        """–¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ—Ä–∑–∏–Ω—ã"""
        driver = self.get_driver(browser_config)
        
        try:
            driver.get(f"{self.base_url}/products/1")
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
            add_to_cart_button = WebDriverWait(driver, 10).until(
                EC.element_to_be_clickable((By.CSS_SELECTOR, ".add-to-cart"))
            )
            add_to_cart_button.click()
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            notification = WebDriverWait(driver, 10).until(
                EC.presence_of_element_located((By.CSS_SELECTOR, ".cart-notification"))
            )
            self.assertTrue(notification.is_displayed())
            
            # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∫–æ—Ä–∑–∏–Ω—É
            cart_link = driver.find_element(By.CSS_SELECTOR, ".cart-link")
            cart_link.click()
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ
            cart_item = WebDriverWait(driver, 10).until(
                EC.presence_of_element_located((By.CSS_SELECTOR, ".cart-item"))
            )
            self.assertTrue(cart_item.is_displayed())
            
        finally:
            driver.quit()
```

---

## **5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**

### **5.1. –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤**

```python
# tests/infrastructure/test_web_servers.py
import requests
import pytest
import time
from tests.config_test_base import ConfigurationTestBase

class TestWebServerCompatibility(ConfigurationTestBase):
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞–º–∏"""
    
    @pytest.mark.parametrize("web_server", ["nginx", "apache"])
    def test_static_files_serving(self, web_server):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤"""
        if web_server == "nginx":
            base_url = "http://localhost:8080"  # Nginx –ø–æ—Ä—Ç
        else:
            base_url = "http://localhost:8081"  # Apache –ø–æ—Ä—Ç
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º CSS —Ñ–∞–π–ª—ã
        css_response = requests.get(f"{base_url}/static/css/main.css")
        self.assertEqual(css_response.status_code, 200)
        self.assertIn("text/css", css_response.headers.get('content-type', ''))
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º JavaScript —Ñ–∞–π–ª—ã
        js_response = requests.get(f"{base_url}/static/js/app.js")
        self.assertEqual(js_response.status_code, 200)
        self.assertIn("application/javascript", js_response.headers.get('content-type', ''))
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        img_response = requests.get(f"{base_url}/static/images/logo.png")
        self.assertEqual(img_response.status_code, 200)
        self.assertIn("image/png", img_response.headers.get('content-type', ''))
    
    def test_gzip_compression(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GZIP —Å–∂–∞—Ç–∏—è"""
        response = requests.get(
            "http://localhost:8000/",
            headers={'Accept-Encoding': 'gzip'}
        )
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–∂–∞—Ç–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
        self.assertIn('gzip', response.headers.get('content-encoding', ''))
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–∞–∑–º–µ—Ä —É–º–µ–Ω—å—à–∏–ª—Å—è
        uncompressed_size = len(response.content)
        
        # –ó–∞–ø—Ä–æ—Å –±–µ–∑ —Å–∂–∞—Ç–∏—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        response_uncompressed = requests.get(
            "http://localhost:8000/",
            headers={'Accept-Encoding': 'identity'}
        )
        compressed_size = len(response_uncompressed.content)
        
        # –°–∂–∞—Ç–∏–µ –¥–æ–ª–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä
        self.assertLess(uncompressed_size, compressed_size)
    
    def test_caching_headers(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è"""
        response = requests.get("http://localhost:8000/static/css/main.css")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
        self.assertIn('cache-control', response.headers)
        self.assertIn('etag', response.headers)
        
        cache_control = response.headers['cache-control']
        self.assertIn('public', cache_control)
        self.assertIn('max-age', cache_control)
```

### **5.2. –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**

```python
# tests/infrastructure/test_os_compatibility.py
import platform
import os
import pytest
from tests.config_test_base import ConfigurationTestBase

class TestOSCompatibility(ConfigurationTestBase):
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –û–°"""
    
    def test_file_path_handling(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—Ç–µ–π —Ñ–∞–π–ª–æ–≤"""
        current_os = platform.system().lower()
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –ø—É—Ç–µ–π
        if current_os == 'windows':
            test_path = "C:\\test\\directory\\file.txt"
            expected_separator = "\\"
        else:
            test_path = "/test/directory/file.txt"
            expected_separator = "/"
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—É—Ç–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
        directory = os.path.dirname(test_path)
        self.assertIn(expected_separator, directory)
    
    def test_environment_variables(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è"""
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
        os.environ['TEST_ENV_VAR'] = 'test_value'
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∏–¥–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
        from django.conf import settings
        self.assertEqual(os.environ.get('TEST_ENV_VAR'), 'test_value')
        
        # –û—á–∏—â–∞–µ–º
        del os.environ['TEST_ENV_VAR']
    
    def test_temp_file_operations(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏"""
        import tempfile
        
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
        with tempfile.NamedTemporaryFile(mode='w+', delete=False) as temp_file:
            temp_file.write("test content")
            temp_path = temp_file.name
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
        self.assertTrue(os.path.exists(temp_path))
        
        # –ß–∏—Ç–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
        with open(temp_path, 'r') as f:
            content = f.read()
        
        self.assertEqual(content, "test content")
        
        # –£–¥–∞–ª—è–µ–º
        os.unlink(temp_path)
        self.assertFalse(os.path.exists(temp_path))
    
    @pytest.mark.skipif(platform.system() != 'Linux', 
                       reason="Linux-specific test")
    def test_linux_specific_features(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Linux-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ–∏—á"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ inotify –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ñ–∞–π–ª–æ–≤
        try:
            import inotify.adapters
            self.assertTrue(True)  # inotify –¥–æ—Å—Ç—É–ø–µ–Ω
        except ImportError:
            self.skipTest("inotify not available")
    
    @pytest.mark.skipif(platform.system() != 'Windows', 
                       reason="Windows-specific test")
    def test_windows_specific_features(self):
        """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Windows-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ–∏—á"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É —Å Windows Registry
        try:
            import winreg
            self.assertTrue(True)  # winreg –¥–æ—Å—Ç—É–ø–µ–Ω
        except ImportError:
            self.skipTest("winreg not available")
```

---

## **6. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤**

### **6.1. –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤**

```python
#!/usr/bin/env python
# scripts/run_configuration_tests.py
import os
import sys
import subprocess
import json
import argparse
from datetime import datetime

class ConfigurationTestRunner:
    """–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤"""
    
    def __init__(self):
        self.results = {}
        self.test_start_time = datetime.now()
    
    def run_tests_for_configuration(self, config_name, settings_module):
        """–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
        print(f"\nüîß Running tests for {config_name}...")
        
        env = os.environ.copy()
        env['DJANGO_SETTINGS_MODULE'] = settings_module
        
        # –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
        cmd = [
            'python', 'manage.py', 'test',
            'tests/config/',
            'tests/infrastructure/',
            '--verbosity=2',
            '--no-input',
            f'--junitxml=reports/{config_name}_results.xml'
        ]
        
        try:
            result = subprocess.run(
                cmd,
                env=env,
                capture_output=True,
                text=True,
                timeout=300  # 5 –º–∏–Ω—É—Ç —Ç–∞–π–º–∞—É—Ç
            )
            
            test_result = {
                'config_name': config_name,
                'exit_code': result.returncode,
                'stdout': result.stdout,
                'stderr': result.stderr,
                'success': result.returncode == 0,
                'timestamp': datetime.now().isoformat()
            }
            
            if result.returncode == 0:
                print(f"‚úÖ {config_name}: PASSED")
            else:
                print(f"‚ùå {config_name}: FAILED")
                print(f"Error: {result.stderr}")
            
            return test_result
            
        except subprocess.TimeoutExpired:
            print(f"‚è∞ {config_name}: TIMEOUT")
            return {
                'config_name': config_name,
                'exit_code': -1,
                'stdout': '',
                'stderr': 'Test timeout',
                'success': False,
                'timeout': True
            }
    
    def run_all_configurations(self):
        """–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π"""
        configurations = [
            ('PostgreSQL 13 + Redis 6', 'config.settings.test_postgresql_13_redis_6'),
            ('PostgreSQL 14 + Redis 7', 'config.settings.test_postgresql_14_redis_7'),
            ('PostgreSQL 15 + Memcached', 'config.settings.test_postgresql_15_memcached'),
            ('SQLite Development', 'config.settings.dev'),
        ]
        
        for config_name, settings_module in configurations:
            result = self.run_tests_for_configuration(config_name, settings_module)
            self.results[config_name] = result
        
        self.generate_report()
    
    def generate_report(self):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏"""
        report = {
            'test_run': {
                'start_time': self.test_start_time.isoformat(),
                'end_time': datetime.now().isoformat(),
                'duration_seconds': (datetime.now() - self.test_start_time).total_seconds(),
            },
            'configurations': self.results,
            'summary': {
                'total_configs': len(self.results),
                'passed_configs': sum(1 for r in self.results.values() if r['success']),
                'failed_configs': sum(1 for r in self.results.values() if not r['success']),
                'success_rate': (sum(1 for r in self.results.values() if r['success']) / len(self.results)) * 100
            }
        }
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç—á–µ—Ç
        os.makedirs('reports', exist_ok=True)
        with open('reports/configuration_test_report.json', 'w') as f:
            json.dump(report, f, indent=2)
        
        # –í—ã–≤–æ–¥–∏–º —Å–≤–æ–¥–∫—É
        print("\n" + "="*50)
        print("CONFIGURATION TESTING SUMMARY")
        print("="*50)
        print(f"Total configurations: {report['summary']['total_configs']}")
        print(f"Passed: {report['summary']['passed_configs']}")
        print(f"Failed: {report['summary']['failed_configs']}")
        print(f"Success rate: {report['summary']['success_rate']:.1f}%")
        print("="*50)
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ—É–¥–∞—á–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        failed_configs = [name for name, result in self.results.items() if not result['success']]
        if failed_configs:
            print("\n‚ùå FAILED CONFIGURATIONS:")
            for config in failed_configs:
                print(f"  - {config}")

if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='Run configuration tests')
    parser.add_argument('--config', help='Specific configuration to test')
    
    args = parser.parse_args()
    
    runner = ConfigurationTestRunner()
    
    if args.config:
        # –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        config_mapping = {
            'pg13_redis6': ('PostgreSQL 13 + Redis 6', 'config.settings.test_postgresql_13_redis_6'),
            'pg14_redis7': ('PostgreSQL 14 + Redis 7', 'config.settings.test_postgresql_14_redis_7'),
        }
        
        if args.config in config_mapping:
            config_name, settings_module = config_mapping[args.config]
            runner.run_tests_for_configuration(config_name, settings_module)
        else:
            print(f"Unknown configuration: {args.config}")
    else:
        # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
        runner.run_all_configurations()
```

### **6.2. GitHub Actions –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

```yaml
# .github/workflows/configuration-tests.yml
name: Configuration Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  configuration-matrix:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-20.04, ubuntu-22.04, windows-latest, macos-latest]
        python-version: ['3.8', '3.9', '3.10', '3.11']
        database: [postgresql-13, postgresql-14, postgresql-15]
        include:
          - database: postgresql-13
            db-port: 5433
          - database: postgresql-14
            db-port: 5434
          - database: postgresql-15
            db-port: 5435
    
    services:
      postgres:
        image: postgres:${{ matrix.database }}
        env:
          POSTGRES_USER: test_user
          POSTGRES_PASSWORD: test_password
          POSTGRES_DB: ecommerce_test
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - ${{ matrix.db-port }}:5432
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v4
      with:
        python-version: ${{ matrix.python-version }}
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install -r requirements-test.txt
    
    - name: Setup test database
      run: |
        python manage.py migrate --settings=config.settings.test
    
    - name: Run configuration tests
      env:
        DATABASE_URL: postgresql://test_user:test_password@localhost:${{ matrix.db-port }}/ecommerce_test
        DJANGO_SETTINGS_MODULE: config.settings.test
      run: |
        python scripts/run_configuration_tests.py
    
    - name: Upload test results
      uses: actions/upload-artifact@v3
      with:
        name: test-results-${{ matrix.os }}-py${{ matrix.python-version }}-${{ matrix.database }}
        path: reports/
        retention-days: 30
    
    - name: Publish Test Results
      uses: dorny/test-reporter@v1
      if: always()
      with:
        name: Configuration Tests
        path: reports/*.xml
        reporter: java-junit
```

---

## **7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å**

### **7.1. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤ –æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏**

```python
# scripts/generate_compatibility_report.py
import json
import matplotlib.pyplot as plt
import pandas as pd
from datetime import datetime

class CompatibilityReportGenerator:
    """–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤ –æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏"""
    
    def __init__(self, test_results_file):
        with open(test_results_file, 'r') as f:
            self.results = json.load(f)
    
    def generate_compatibility_matrix(self):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Ç—Ä–∏—Ü—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏"""
        config_data = []
        
        for config_name, result in self.results['configurations'].items():
            config_data.append({
                'Configuration': config_name,
                'Status': 'PASS' if result['success'] else 'FAIL',
                'Python Version': self._extract_python_version(config_name),
                'Database': self._extract_database(config_name),
                'Cache': self._extract_cache(config_name),
                'Test Duration': result.get('duration_seconds', 0),
                'Errors': len(result.get('stderr', '').split('\n')) if result.get('stderr') else 0
            })
        
        df = pd.DataFrame(config_data)
        
        # –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é
        self._create_compatibility_chart(df)
        
        return df
    
    def _extract_python_version(self, config_name):
        """–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ Python –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
        if 'Python 3.8' in config_name:
            return '3.8'
        elif 'Python 3.9' in config_name:
            return '3.9'
        elif 'Python 3.10' in config_name:
            return '3.10'
        elif 'Python 3.11' in config_name:
            return '3.11'
        return 'Unknown'
    
    def _create_compatibility_chart(self, df):
        """–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏"""
        fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(15, 10))
        
        # –°—Ç–∞—Ç—É—Å –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º
        status_counts = df['Status'].value_counts()
        ax1.pie(status_counts.values, labels=status_counts.index, autopct='%1.1f%%')
        ax1.set_title('Test Results Distribution')
        
        # –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ –≤–µ—Ä—Å–∏—è–º Python
        python_compat = df.groupby('Python Version')['Status'].value_counts().unstack()
        python_compat.plot(kind='bar', ax=ax2)
        ax2.set_title('Compatibility by Python Version')
        ax2.tick_params(axis='x', rotation=45)
        
        # –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
        db_compat = df.groupby('Database')['Status'].value_counts().unstack()
        db_compat.plot(kind='bar', ax=ax3)
        ax3.set_title('Compatibility by Database')
        ax3.tick_params(axis='x', rotation=45)
        
        # –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
        df.boxplot(column='Test Duration', by='Python Version', ax=ax4)
        ax4.set_title('Test Duration by Python Version')
        
        plt.tight_layout()
        plt.savefig('reports/compatibility_matrix.png', dpi=300, bbox_inches='tight')
        plt.close()

if __name__ == '__main__':
    generator = CompatibilityReportGenerator('reports/configuration_test_report.json')
    matrix = generator.generate_compatibility_matrix()
    
    print("Compatibility Matrix:")
    print(matrix.to_string(index=False))
```

–î–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

1. **–í—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ** —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å–∏—Å—Ç–µ–º—ã
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. **–†–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ** –ø—Ä–æ–±–ª–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
4. **–î–µ—Ç–∞–ª—å–Ω—É—é –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å** –æ —Å—Ç–∞—Ç—É—Å–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å CI/CD** –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ –≤–æ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö.
